<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Schneller einchecken</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>

  <form class="row g-3 m-3" autocomplete="on" id="frm-pd">
    <div class="col-md-12">
      <h1>Schnelltest-Profil</h1>
      <h2>für Ihren Testzentrumsbesuch</h2>
    </div>
    <div class="col-md-5">
      <label for="vorname" class="form-label">Vorname</label>
      <input type="text" class="form-control" on placeholder="Vorname" required name="vorname" id="vorname"
        autocomplete="cc-name">
    </div>
    <div class="col-md-5">
      <label for="nachname" class="form-label">Nachname</label>
      <input type="text" class="form-control" placeholder="Nachname" required name="nachname" id="nachname">
    </div>
    <div class="col-md-2">
      <label for="gender" class="form-label">Geschlecht</label>
      <select id="geschlecht" name="gender" class="form-select" required>
        <option selected></option>
        <option value="m">m</option>
        <option value="w">w</option>
        <option value="d">d</option>
      </select>
    </div>

    <div class="col-12">
      <label for="geburtsdatum" class="form-label">Gebursdatum</label>
      <input type="date" class="form-control" required name="geburtsdatum" id="geburtsdatum">
    </div>

    <div class="col-9">
      <label for="strasse" class="form-label">Straße</label>
      <input type="text" class="form-control" placeholder="Straße" required name="strasse" id="strasse">
    </div>
    <div class="col-3">
      <label for="hausnummer" class="form-label">Hausnr.</label>
      <input type="text" class="form-control" placeholder="Hausnr." required name="hausnummer" id="hausnummer">
    </div>

    <div class="col-9">
      <label for="ort" class="form-label">Ort</label>
      <input type="text" class="form-control" placeholder="Ort" required name="ort" id="ort">
    </div>
    <div class="col-3">
      <label for="plz" class="form-label">PLZ</label>
      <input type="text" class="form-control" placeholder="PLZ" required name="plz" id="plz">
    </div>

    <div class="col-md-6">
      <label for="phone" class="form-label">Telefonnr.</label>
      <input type="tel" class="form-control" id="phone" name="phone" placeholder="Rufnr." required>
    </div>
    <div class="col-md-6">
      <label for="email" class="form-label">eMail</label>
      <input type="email" id="email" name="email" class="form-control" placeholder="ihremail@email.com">
    </div>

    <div class="col-12">
      Möchten Sie das Testergebnis an die Corona-Warn-App übermitteln?
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" value="CWA_NO"
          required>
        <label class="form-check-label" for="flexRadioDefault1">
          KEINE DATEN AN DIE CORONA-WARN-APP ÜBERMITTELN
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" value="CWA_PSE">
        <label class="form-check-label" for="flexRadioDefault2">
          EINWILLIGUNG ZUR PSEUDONOMYSIERTEN ÜBERMITTLUNG (NICHT NAMENTLICHE ANZEIGE)
          <br>
          Hiermit erkläre ich mein Einverständnis zum Übermitteln meines Testergebnisses und meines pseudonymen Codes an
          das Serversystem des RKI, damit ich mein Testergebnis mit der Corona-Warn-App abrufen kann. Das Testergebnis
          in der App kann hierbei nicht als namentlicher Testnachweis verwendet werden. Mir wurden Hinweise zum
          Datenschutz ausgehändigt.
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault3" value="CWA_FUL">
        <label class="form-check-label" for="flexRadioDefault3">
          EINWILLIGUNG ZUR PERSONALISIERTEN ÜBERMITTLUNG (NAMENTLICHER TESTNACHWEIS)
          <br>
          Hiermit erkläre ich mein Einverständnis zum Übermitteln des Testergebnisses und meines pseudonymen Codes an
          das Serversystem des RKI, damit ich mein Testergebnis mit der Corona-Warn-App abrufen kann. Ich willige
          außerdem in die Übermittlung meines Namens und Geburtsdatums an die App ein, damit mein Testergebnis in der
          App als namentlicher Testnachweis angezeigt werden kann. Mir wurden Hinweise zum Datenschutz ausgehändigt.
        </label>
      </div>
    </div>

    <div class="col-6">
      <button type="submit" class="btn btn-primary  btn-lg">
        Erzeuge
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code"
          viewBox="0 0 16 16">
          <path d="M2 2h2v2H2V2Z" />
          <path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z" />
          <path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z" />
          <path
            d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z" />
          <path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z" />
        </svg>
      </button>
    </div>

    <div class="col-6">
      <button type="reset" class="btn btn-outline-secondary">
        <span>Eingaben zurücksetzen</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise"
          viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z" />
          <path
            d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z" />
        </svg>
      </button>
    </div>
  </form>

  <!-- QR CODE -->
  <div class="m-3 row">
    <div id="qrcode" class="col-md-6 d-flex justify-content-center">

    </div>
    <div class="col-md-6">
      <h3 class="text-center">Hier entsteht ihr persönlicher QR-Code</h3>

      <ol>
        <li>Tragen Sie Ihre Daten ein.</li>
        <li>Klicken Sie "Erzeuge

          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code"
            viewBox="0 0 16 16">
            <path d="M2 2h2v2H2V2Z" />
            <path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z" />
            <path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z" />
            <path
              d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z" />
            <path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z" />
          </svg>
          ".
        </li>
        <li>Zeigen Sie Ihren QR-Code im Testzentrum vor oder speichern Sie ihn für Ihren nächsten Besuch.</li>
      </ol>
      <!-- <p><em class="text-danger">Teilen Sie diesen Code nicht übers Internet und verschicken Sie ihn nicht, da er Ihre
          persönlichen Daten enthält.</em></p> -->
    </div>
  </div>

  <div class="col-12 p-3 mt-5 bg-secondary bg-opacity-25">
    <!-- corona-warn-app/cwa-app-ios is licensed under the Apache License 2.0 -->
    <!-- Ich verweise hier auf das Code-Repository "https://github.com/corona-warn-app/cwa-app-ios" von Corona-Warn-App, dem die folgenden Punkte entnommen oder angelehnt sind. -->
    <h3>Legen Sie Ihre persönlichen Daten als QR-Code ab, um die Registrierung an der Teststelle zu beschleunigen</h3>
    <p>Mit Ihrem eigenen Schnelltest-Profil müssen Sie Ihre persönlichen Daten nicht bei jedem neuen Schnelltest
      erneut
      ausfüllen</p>
    <h4>Datenschutz und Datensicherheit</h4>
    <ul class="list-group">
      <li class="list-group-item">Das Erzeugen eines Schnelltest-Profils über diese Webseite und dessen Verwendung
        sind freiwillig.</li>
      <li class="list-group-item">Die App wandelt die Daten, die Sie für Ihr Schnelltest-Profil eingeben, in Ihren
        persönlichen QR-Code um. Im QR-Code sind dann alle eingegebenen Daten enthalten.</li>
      <li class="list-group-item">In der Teststelle können Sie den QR-Code Ihres Schnelltest-Profils scannen lassen,
        um der Teststelle Ihre Daten schnell und sicher bereitzustellen. Die Teststelle benötigt Ihre Daten zur
        Durchführung des Tests. Sie können die Daten aber auch ohne die QR-Code bereitstellen. Sie entscheiden
        selbst,
        auf welche Weise Sie Ihre Daten der Teststelle übermitteln wollen.</li>
      <li class="list-group-item">Auf Ihr persönliches Schnelltest-Profil haben zunächst nur Sie Zugriff. Nur wenn
        Sie
        den QR-Code des Schnelltest-Profils anderen Personen zeigen, können diese Zugriff auf die persönlichen Daten
        Ihres Schnelltest-Profils erhalten. Ein Zugriff auf andere Daten erfolgt dabei nicht.
      </li>
      <li class="list-group-item">
        Sie haben jederzeit die Möglichkeit, Ihr Schnelltest-Profil wieder zu löschen. Dazu müssen Sie den QR-Code
        entfernen, sofern Sie ihn gespeichert haben. Kopien des QR-Codes werden durch diese Webseite oder den
        Teststellenbetreiber nicht erzeugt.
      </li>
      <li class="list-group-item">
        Der QR-Code enthält Ihre persönlichen Angaben. Stellen Sie Ihren persönlichen QR-Code niemandem zur
        Verfügung,
        wenn Sie nicht wollen, dass die Daten ausgelesen werden. Wir empfehlen Ihren persönlichen QR-Code nicht zu
        veröffentlichen und nicht per E-Mail zu versenden.
      </li>
    </ul>
  </div>

  <div class="m-3 row">
    <p class="">
      Hinweis:
      <br>
      Diese Website stellt kein Kontaktformular dar.
      Sie dient ausschließlich zur Erzeugung Ihres persönlichen QR-Codes.
      Er wird direkt auf Ihrem Browser-fähigen Endgerät erzeugt und nicht übers Internet übertragen.
      Dadurch werden Ihre Daten nicht an den Website-Betreiber oder andere Stellen weitergeleitet, sondern bleiben in
      Ihrem Besitz.
    </p>
  </div>

  <script src="js/qrcode.min.js"></script>
  <script type="text/javascript">

    function handleFormSubmit(event) {
      event.preventDefault();

      const f = new FormData(event.target);

      var object = {};
      var s = "";
      f.forEach(function (value, key) {
        object[key] = value;
        s = s + "," + value;
      })
      s = s.substring(1);

      console.log(s);
      //qrcode.makeCode(JSON.stringify(object));
      qrcode.makeCode(s);
    }

    const f = document.getElementById("frm-pd");
    f.addEventListener('submit', handleFormSubmit);

    var qrcode = new QRCode(document.getElementById("qrcode"), {
      text: "Willkommen!",
      correctLevel: QRCode.CorrectLevel.H
    });
    qrcode.makeCode("Willkommen!");

  </script>

</body>

</html>